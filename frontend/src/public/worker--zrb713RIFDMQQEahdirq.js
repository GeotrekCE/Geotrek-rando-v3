(()=>{"use strict";self.addEventListener("message",(e=>{console.log(e.data),e.command}));const e="trek-pages";self.addEventListener("fetch",(t=>{var s,a;(t.request.url.includes("/trek/")||t.request.url.includes("/service/"))&&(console.log("SW url",t.request.url),t.respondWith((s=t.request,a=1e4,new Promise(((e,t)=>{const n=setTimeout(t,a);console.log("Try request for",s.url),fetch(s).then((t=>{clearTimeout(n),e(t)}),t)}))).catch((()=>(async t=>{const s=await caches.open(e);return await s.match(t)||s.match("/offline/")})(t.request)))))})),self.addEventListener("activate",(async()=>(await caches.open("offline")).add("/offline")))})();